추천 대상 사용자에 대한 Neighbor가 결정이 되었으면 이 Neighbor에 속하는 사용자들의 평가 값을 바탕으로 추천 대상 사용자가 각 아이템을 얼마나 좋아할지를 계산하여야 한다.
우선 User-based CF의 경우 앞에서는 단순하게 Neighbor에 속한 사용자의 각 아이템에 대한 평가의 평균으로 계산하였지만 실제로는 이보다 더 정확한 예측을 위해 다양한 방법이 사용된다.
우선, 가장 먼저 생각할 수 있는 것은 추천 대상 사용자와 각 이웃 사용자 간의 유사도가 다른데, 당연히 유사도가 높은 사용자의 평가치에 더 높은 가중치를 주어야 한다. 그래서 각 이웃 사용자와 추천 대상 사용자와의 유사도와 아이템의 평가치를 가중 평균한 것을 추천 대상 사용자의 예상 평점으로 사용할 수 있다. 이웃 사용자 중에서도 해당 아이템에 대한 평가 값이 있는 경우에만 예상 평점 계산에 그 사용자의 평점이 반영된다.

$$
P_{a,i}=\frac{\sum_{u=1}^{n}w_{a,u}*r_{u,i}}{\sum_{u=1}^{n}w_{a,u}}
$$

$a$: 사용자, $u$:이웃 사용자, $n$: 이웃 사용자의 수
$P_{a,i}$: 아이템 $i$에 대한 사용자 $a$의 예상 평점
$w_{a,u}$: 사용자 $a$와 $u$의 유사도
$r_{u,i}$: 아이템 $i$에 대한 사용자 $u$의 평점

위의 방법의 한 가지 문제는 사용자에 따라 평가 경향이 다른데 이것이 반영되지 않는 다는 것이다. 예를 들어 이웃 사용자 중 일부가 평가 경향이 매우 박한데, 우연히 이들만 특정 아이템에 대한 평가 값이 존재하는 경우는 이 아이템에 대한 예상 평점이 낮게 나오는 오류가 생길 수 있다. 이런 문제를 개선하기 위해서 **각 이웃 사용자의 평가 경향을 예산 평점 계산에 적용하는 개선된 방법이 고안**되었다.
개선된 평가 방법은 아래와 같다.

각 이웃 사용자의 평균 평점을 계산한다. 아이템 $i$에 대해서 예상 평점을 계산한다면 각 이웃 사용자들의 $i$에 대한 원래 평점과 해당 이웃 사용자의 평균 평점과의 차이, 즉 아이템 $i$의 평점이 평균에서 얼마나 떨어져 있는가를 해당 이웃 사용자의 유사도로 가중 평균해서 예상 평점을 계산한다. 이 예상 평점은 이웃 사용자들의 평점을 바탕으로 계산한다. 이 예상 폄점은 이웃 사용자들의 평점을 바탕으로 계산한 아이템 $i$의 예상 '평균과의 차이값'으로 해석할 수 있다. 그래서, 이 값을 추천 대상 사용자의 평점 평균에 더하면 아이템 $i$에 대한 좀 더 정확한 예상 평점이 계산될 것으로 예상할 수 있다.

$$P_{a,i} = \bar{r_{a}}+\frac{\sum_{u=1}^{n}w_{a,u}*(r_{u,i}-\bar{r_{u}})}{\sum_{u=1}^{n}w_{a,u}}$$

$a$: 사용자, $u$: 이웃 사용자, $n$: 이웃 사용자의 수
$P_{a,i}$: 아이템 $i$에 대한 사용자 $a$의 예상 평점
$w_{a,u}$: 사용자 $a$와 $u$의 유사도
$r_{u,i}$: 아이템 $i$에 대한 사용자 $u$의 평점
$\bar{r_{a}}$: 사용자 $a$의 전체 평점 평균
$\bar{r_{u}}$: 사용자 $u$의 전체 평균 평점

그 외에도 예상 평점의 정확성을 높이기 위해서 사용하는 방법은 추천 대상 사용자와 이웃 사용자와 유사도를 계산하는 방법은 위ㅔ서 설명하였는데, 같은 유사도라도 계산의 근거가 되는 공통 아이템 수가 몇 개인가에 따라 그 유사도 측정치의 신뢰도는 다르다. 예를 들어 추천 대상 사용자와의 유사도가 이웃 사용자 A는 0.8, 다른 이웃 사용자 B는 0.7이라고 하자. 이때 사용자 A와 추천 대상 사용자가 공통으로 평가한 아이템의 수는 3개이고 사용자 B와 추천 대상 사용자가 공통으로 평가한 아이템의 수는 10개라면 0.8보다는 0.7이 오히려 더 높은 신뢰도를 가지고 있다고 볼 수 있다. 협업필터링의 저오학도를 떨어트리는 것 중 하나가 over-fitting이다. 위의 예에서 아이템의 수가 3개 밖에 안되는 0.8을 가지고 추전을 하는 경우, 표면 값으로 볼 때에는 매우 정확한 추천이 가능할 것처럼 예상되지만 적은 아이템 수에 기반했기 때문에 결과가 부정확할 가능성이 높다. 이런 문제를 피하기 위해서 추천 대상 사용자와 이웃 사용자와의 공통 아이템 수에 따라 가중치를 부여하는 것을 신뢰도 가중(significance weighting)이라고 한다. 위의 예상 평점 계산식에 공통 아이템의 수를 추가의 가중치로 곱해서 최종 예상 평점을 계산하는 방식이다.
이렇게 계산된 각 아이템의 예상 평점을 가지고 높은 순서대로 대상 사요앚에게 추천을 해주면 된다. 목적에 따라 추천 상품수는 달라질 수 있다.
Item-based CF의 경우는 각 아이템에 대한 예상 평점을 사용자별로 계산할 필요가 없다. 어떤 사용자가 특정 아이템을 선택하였다면 해당 아이템과 유사도가 높은 아이템을 추천하면 된다. 만일 추천 대상 사용자가 여러 개의 아이템을 선택하였다면, 선택된 아이템과 다른 아이템의 유사도를 평균해서 최종 리스트를 작성하면 된다. 즉, Item-based CF에서 서로 다은 사용자라도 같은 아이템을 선택하는 한 모두 같은 아이템을 추천 받게 된다.
